<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>‡¶Æ‡ßá‡¶°‡¶ø‡¶∏‡¶ø‡¶® ‡¶∞‡¶ø‡¶Æ‡¶æ‡¶á‡¶®‡ßç‡¶°‡¶æ‡¶∞</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f0f9ff;
      margin: 0;
      padding: 0;
    }

    header {
      background-color: #0284c7;
      color: white;
      text-align: center;
      padding: 1rem;
    }

    .container {
      max-width: 800px;
      margin: 2rem auto;
      padding: 1rem;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .day {
      margin-bottom: 2rem;
    }

    .day h2 {
      border-bottom: 2px solid #38bdf8;
      padding-bottom: 0.5rem;
      color: #075985;
    }

    .med-list {
      list-style: none;
      padding: 0;
    }

    .med-item {
      display: flex;
      justify-content: space-between;
      background: #e0f7ff;
      margin: 0.5rem 0;
      padding: 0.75rem 1rem;
      border-radius: 5px;
    }

    .med-item input[type="checkbox"] {
      transform: scale(1.2);
    }

    @media (max-width: 600px) {
      .med-item {
        flex-direction: column;
        align-items: flex-start;
      }

      .med-item input[type="checkbox"] {
        margin-top: 0.5rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>‡¶Æ‡ßá‡¶°‡¶ø‡¶∏‡¶ø‡¶® ‡¶∞‡¶ø‡¶Æ‡¶æ‡¶á‡¶®‡ßç‡¶°‡¶æ‡¶∞</h1>
    <p>‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶ø‡¶§ ‡¶∏‡¶Æ‡¶Ø‡¶º‡ßá ‡¶ì‡¶∑‡ßÅ‡¶ß ‡¶ñ‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶™‡¶æ‡¶¨‡ßá‡¶®</p>
  </header>

  <div class="container" id="scheduleContainer"></div>

  <script>
    // ‡¶Æ‡ßá‡¶°‡¶ø‡¶∏‡¶ø‡¶® ‡¶∂‡¶ø‡¶°‡¶ø‡¶â‡¶≤ (‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£‡¶∏‡ßç‡¶¨‡¶∞‡ßÇ‡¶™ ‡¶∏‡¶Æ‡ßü 24-hr format)
    const medicineSchedule = {
      "‡¶Ü‡¶ú": [
        { name: "Paracetamol 500mg", time: "08:00" },
        { name: "Vitamin C", time: "16:00" },
        { name: "Antacid", time: "22:00" }
      ]
    };

    // HTML ‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶æ‡¶∞
    function renderSchedule(schedule) {
      const container = document.getElementById("scheduleContainer");

      for (const day in schedule) {
        const daySection = document.createElement("div");
        daySection.className = "day";

        const heading = document.createElement("h2");
        heading.textContent = day;

        const list = document.createElement("ul");
        list.className = "med-list";

        schedule[day].forEach(med => {
          const item = document.createElement("li");
          item.className = "med-item";

          const label = document.createElement("label");
          label.textContent = `${med.name} - ${med.time}`;

          const checkbox = document.createElement("input");
          checkbox.type = "checkbox";

          item.appendChild(label);
          item.appendChild(checkbox);
          list.appendChild(item);
        });

        daySection.appendChild(heading);
        daySection.appendChild(list);
        container.appendChild(daySection);
      }
    }

    // ‡¶∏‡¶Æ‡ßü ‡¶™‡¶æ‡¶∞‡ßç‡¶∏ ‡¶ï‡¶∞‡¶æ (HH:mm ‡¶ï‡ßá Date object ‡¶è ‡¶∞‡ßÇ‡¶™‡¶æ‡¶®‡ßç‡¶§‡¶∞)
    function parseTimeToDate(timeStr) {
      const [hour, minute] = timeStr.split(":").map(Number);
      const now = new Date();
      const date = new Date(now.getFullYear(), now.getMonth(), now.getDate(), hour, minute);
      return date;
    }

    // ‡¶∞‡¶ø‡¶Æ‡¶æ‡¶á‡¶®‡ßç‡¶°‡¶æ‡¶∞ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
    function setupReminders(schedule) {
      for (const day in schedule) {
        schedule[day].forEach(med => {
          const medTime = parseTimeToDate(med.time);

          // ‡ßß ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü ‡¶Ü‡¶ó‡ßá ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡¶Æ‡ßü ‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶£
          const notifyTime = new Date(medTime.getTime() - 1 * 60 * 1000);
          const now = new Date();
          const delay = notifyTime.getTime() - now.getTime();

          if (delay > 0) {
            setTimeout(() => {
              showNotification(med.name, med.time);
            }, delay);
          }
        });
      }
    }

    // ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞ ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
    function showNotification(medName, time) {
      if (Notification.permission === "granted") {
        new Notification("üíä ‡¶ì‡¶∑‡ßÅ‡¶ß ‡¶Æ‡¶®‡ßá ‡¶ï‡¶∞‡¶ø‡ßü‡ßá ‡¶¶‡¶ø‡¶ö‡ßç‡¶õ‡ßá", {
          body: `${time} - ${medName} ‡¶ñ‡¶æ‡¶ì‡ßü‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßü ‡¶π‡ßü‡ßá‡¶õ‡ßá!`,
          icon: "https://cdn-icons-png.flaticon.com/512/2950/2950701.png"
        });
      }
    }

    // ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶Ö‡¶®‡ßÅ‡¶Æ‡¶§‡¶ø ‡¶ö‡¶æ‡¶ì‡ßü‡¶æ
    function requestNotificationPermission() {
      if ("Notification" in window) {
        Notification.requestPermission().then(permission => {
          if (permission === "granted") {
            console.log("‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶Ö‡¶®‡ßÅ‡¶Æ‡ßã‡¶¶‡¶ø‡¶§ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá");
            setupReminders(medicineSchedule);
          } else {
            alert("‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶¨‡ßá ‡¶®‡¶æ ‡¶ï‡¶æ‡¶∞‡¶£ ‡¶Ö‡¶®‡ßÅ‡¶Æ‡¶§‡¶ø ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶Ø‡¶º‡¶®‡¶ø‡•§");
          }
        });
      } else {
        alert("‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞ ‡¶®‡ßã‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶∂‡¶® ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡ßá ‡¶®‡¶æ‡•§");
      }
    }

    // ‡¶∂‡ßÅ‡¶∞‡ßÅ‡¶§‡ßá ‡¶∞‡¶æ‡¶®
    renderSchedule(medicineSchedule);
    requestNotificationPermission();
  </script>
</body>
</html>
